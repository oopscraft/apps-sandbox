ext {
    projectGroup = "org.oopscraft.apps"
    projectVersion = "1.0.0-SNAPSHOT"
    platformVersion = "1.0.0-SNAPSHOT"
    jdkVersion = "11"
    includeSubmodule = System.getProperty("includeSubmodule")?System.getProperty("includeSubmodule").toBoolean():false
    mavenPublishUrl = System.getProperty("mavenPublishUrl")
    mavenUsername = System.getProperty("mavenUsername")
    mavenPassword = System.getProperty("mavenPassword")
}

allprojects {
    afterEvaluate { project ->
        group = projectGroup
        version = projectVersion
        if(project.plugins.hasPlugin("java")){
            project.sourceCompatibility = jdkVersion
            project.targetCompatibility = jdkVersion
            compileJava.options.encoding = "UTF-8"
            tasks.withType(JavaCompile){
                options.encoding = 'UTF-8'
            }
            sourceSets.main.resources {
                srcDirs += ["src/main/java"]
                exclude "**/*.java"
            }
            sourceSets.test.resources {
                srcDirs += ["src/main/java"]
                exclude "**/*.java"
            }
        }
        if(project.plugins.hasPlugin('maven-publish')) {
            project.publishing {
                repositories {
                    maven {
                        allowInsecureProtocol = true
                        url mavenPublishUrl
                        credentials {
                            username mavenUsername
                            password mavenPassword
                        }
                    }
                }
            }
        }
    }
}

